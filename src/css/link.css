a[href] {
  color: var(--text-color-link);
  display: inline;
  text-decoration: none;
  border-bottom: var(--link-underline-width) solid var(--text-color-link);
  transition: color var(--theme-transition-duration) ease,
    border-width 0.1s ease,
    outline-offset 0.2s ease;

  outline: 3px solid transparent;
  outline-offset: 5px;
}

/** We need the additional :not(:hover) selector due to specificity troubles. 
Otherwise, all visited links would not change color on hover.*/
a[href]:visited:not(.ignore-visited-styling, .header-anchor):not(:hover) {
  color: var(--text-color-link-visited);
  border-color: var(--text-color-link-visited);
}

a[href]:hover {
  color: var(--primary-color);
  border-bottom: 0.3rem solid var(--primary-color);
}

a[href]:focus-visible {
  outline: 3.5px solid var(--primary-color);
  outline-offset: 2px;
}

:target {
  scroll-margin-top: 30px;
  animation: 0.7s highlight;
}


@keyframes highlight {
  0% {
    outline: 8px solid var(--primary-color);
    outline-offset: 20px;
  }

  70% {
    outline-offset: 5px;
    outline: 8px solid var(--primary-color);
  }

  100% {
    outline: 8px solid transparent;
  }
}

@media (prefers-reduced-motion: reduce) {
  :target {
    outline-offset: 10px;
    /* TODO: Currently the CSS reset disables all animations in reduced motion.
      Maybe we should be a bit more granular here. */
    animation: 0.6s highlight-reduced !important;
  }

  @keyframes highlight-reduced {
    0% {
      outline: 8px solid transparent;
    }

    20% {
      outline: 8px solid var(--primary-color);
    }

    80% {
      outline: 8px solid var(--primary-color);
    }

    100% {
      outline: 8px solid transparent;
    }
  }
}