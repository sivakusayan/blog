{% from "partials/addComment.njk" import addComment %}

{% macro comment(entry, fileSlug, noReply) %}
<blockquote id="{{ entry._id }}">
   <div class="comment">
       <div class="comment-header">
         <cite>{{ entry.name }}</cite>
         â€¢
         <time datetime="{{ entry.date | htmlDateString}}">{{ entry.date | dateOnly}} at {{ entry.date | timeOnly}}</time>
         <a class="comment-anchor" href="#{{ entry._id }}">Permalink</a>
       </div>
       <div>
         {{ entry.message | safe}} 
       </div>

   {%- if not entry.parent %}
   {%- if not noReply %}
         <details class="reply-container">
            <summary>Add Reply</summary>
            {{ addComment(entry._id, fileSlug) }}
         </details>
   {%- endif %}
   {%- endif %}
   </div>
   {%- if (entry.children | length) > 0 %}
   <ul class="subcomments">
     {%- for childEntry in entry.children %}
     <li>{{ comment(childEntry) }}</li>  
     {%- endfor %}
   </ul>
   {%- endif %}
 </blockquote>
{% endmacro %} 
